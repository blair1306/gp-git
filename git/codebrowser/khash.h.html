<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>khash.h source code [codebrowser/khash.h] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/khash.h'; var root_path = '..'; var data_path = '../../data';</script>
<script src='../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='./'>codebrowser</a>/<a href='khash.h.html'>khash.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* The MIT License</i></td></tr>
<tr><th id="2">2</th><td><i></i></td></tr>
<tr><th id="3">3</th><td><i>   Copyright (c) 2008, 2009, 2011 by Attractive Chaos &lt;attractor@live.co.uk&gt;</i></td></tr>
<tr><th id="4">4</th><td><i></i></td></tr>
<tr><th id="5">5</th><td><i>   Permission is hereby granted, free of charge, to any person obtaining</i></td></tr>
<tr><th id="6">6</th><td><i>   a copy of this software and associated documentation files (the</i></td></tr>
<tr><th id="7">7</th><td><i>   "Software"), to deal in the Software without restriction, including</i></td></tr>
<tr><th id="8">8</th><td><i>   without limitation the rights to use, copy, modify, merge, publish,</i></td></tr>
<tr><th id="9">9</th><td><i>   distribute, sublicense, and/or sell copies of the Software, and to</i></td></tr>
<tr><th id="10">10</th><td><i>   permit persons to whom the Software is furnished to do so, subject to</i></td></tr>
<tr><th id="11">11</th><td><i>   the following conditions:</i></td></tr>
<tr><th id="12">12</th><td><i></i></td></tr>
<tr><th id="13">13</th><td><i>   The above copyright notice and this permission notice shall be</i></td></tr>
<tr><th id="14">14</th><td><i>   included in all copies or substantial portions of the Software.</i></td></tr>
<tr><th id="15">15</th><td><i></i></td></tr>
<tr><th id="16">16</th><td><i>   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,</i></td></tr>
<tr><th id="17">17</th><td><i>   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</i></td></tr>
<tr><th id="18">18</th><td><i>   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</i></td></tr>
<tr><th id="19">19</th><td><i>   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</i></td></tr>
<tr><th id="20">20</th><td><i>   BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</i></td></tr>
<tr><th id="21">21</th><td><i>   ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</i></td></tr>
<tr><th id="22">22</th><td><i>   CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</i></td></tr>
<tr><th id="23">23</th><td><i>   SOFTWARE.</i></td></tr>
<tr><th id="24">24</th><td><i>*/</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#<span data-ppcond="26">ifndef</span> <span class="macro" data-ref="_M/__AC_KHASH_H">__AC_KHASH_H</span></u></td></tr>
<tr><th id="27">27</th><td><u>#define <dfn class="macro" id="_M/__AC_KHASH_H" data-ref="_M/__AC_KHASH_H">__AC_KHASH_H</dfn></u></td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><u>#define <dfn class="macro" id="_M/AC_VERSION_KHASH_H" data-ref="_M/AC_VERSION_KHASH_H">AC_VERSION_KHASH_H</dfn> "0.2.8"</u></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><b>typedef</b> <a class="typedef" href="../include/stdint.h.html#uint32_t" title='uint32_t' data-type='unsigned int' data-ref="uint32_t">uint32_t</a> <dfn class="typedef" id="khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</dfn>;</td></tr>
<tr><th id="32">32</th><td><b>typedef</b> <a class="typedef" href="../include/stdint.h.html#uint64_t" title='uint64_t' data-type='unsigned long' data-ref="uint64_t">uint64_t</a> <dfn class="typedef" id="khint64_t" title='khint64_t' data-type='uint64_t' data-ref="khint64_t">khint64_t</dfn>;</td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><b>typedef</b> <a class="typedef" href="#khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</a> <dfn class="typedef" id="khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</dfn>;</td></tr>
<tr><th id="35">35</th><td><b>typedef</b> <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="typedef" id="khiter_t" title='khiter_t' data-type='khint_t' data-ref="khiter_t">khiter_t</dfn>;</td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><u>#define <dfn class="macro" id="_M/__ac_isempty" data-ref="_M/__ac_isempty">__ac_isempty</dfn>(flag, i) ((flag[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2)</u></td></tr>
<tr><th id="38">38</th><td><u>#define <dfn class="macro" id="_M/__ac_isdel" data-ref="_M/__ac_isdel">__ac_isdel</dfn>(flag, i) ((flag[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1)</u></td></tr>
<tr><th id="39">39</th><td><u>#define <dfn class="macro" id="_M/__ac_iseither" data-ref="_M/__ac_iseither">__ac_iseither</dfn>(flag, i) ((flag[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;3)</u></td></tr>
<tr><th id="40">40</th><td><u>#define <dfn class="macro" id="_M/__ac_set_isdel_false" data-ref="_M/__ac_set_isdel_false">__ac_set_isdel_false</dfn>(flag, i) (flag[i&gt;&gt;4]&amp;=~(1ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1)))</u></td></tr>
<tr><th id="41">41</th><td><u>#define <dfn class="macro" id="_M/__ac_set_isempty_false" data-ref="_M/__ac_set_isempty_false">__ac_set_isempty_false</dfn>(flag, i) (flag[i&gt;&gt;4]&amp;=~(2ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1)))</u></td></tr>
<tr><th id="42">42</th><td><u>#define <dfn class="macro" id="_M/__ac_set_isboth_false" data-ref="_M/__ac_set_isboth_false">__ac_set_isboth_false</dfn>(flag, i) (flag[i&gt;&gt;4]&amp;=~(3ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1)))</u></td></tr>
<tr><th id="43">43</th><td><u>#define <dfn class="macro" id="_M/__ac_set_isdel_true" data-ref="_M/__ac_set_isdel_true">__ac_set_isdel_true</dfn>(flag, i) (flag[i&gt;&gt;4]|=1ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1))</u></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><u>#define <dfn class="macro" id="_M/__ac_fsize" data-ref="_M/__ac_fsize">__ac_fsize</dfn>(m) ((m) &lt; 16? 1 : (m)&gt;&gt;4)</u></td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td><u>#define <dfn class="macro" id="_M/kroundup32" data-ref="_M/kroundup32">kroundup32</dfn>(x) (--(x), (x)|=(x)&gt;&gt;1, (x)|=(x)&gt;&gt;2, (x)|=(x)&gt;&gt;4, (x)|=(x)&gt;&gt;8, (x)|=(x)&gt;&gt;16, ++(x))</u></td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td><em>static</em> <b>inline</b> <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="decl def" id="__ac_X31_hash_string" title='__ac_X31_hash_string' data-ref="__ac_X31_hash_string">__ac_X31_hash_string</dfn>(<em>const</em> <em>char</em> *<dfn class="local col7 decl" id="87s" title='s' data-type='const char *' data-ref="87s">s</dfn>)</td></tr>
<tr><th id="50">50</th><td>{</td></tr>
<tr><th id="51">51</th><td>	<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col8 decl" id="88h" title='h' data-type='khint_t' data-ref="88h">h</dfn> = (<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a>)*<a class="local col7 ref" href="#87s" title='s' data-ref="87s">s</a>;</td></tr>
<tr><th id="52">52</th><td>	<b>if</b> (<a class="local col8 ref" href="#88h" title='h' data-ref="88h">h</a>) <b>for</b> (++<a class="local col7 ref" href="#87s" title='s' data-ref="87s">s</a> ; *<a class="local col7 ref" href="#87s" title='s' data-ref="87s">s</a>; ++<a class="local col7 ref" href="#87s" title='s' data-ref="87s">s</a>) <a class="local col8 ref" href="#88h" title='h' data-ref="88h">h</a> = (<a class="local col8 ref" href="#88h" title='h' data-ref="88h">h</a> &lt;&lt; <var>5</var>) - <a class="local col8 ref" href="#88h" title='h' data-ref="88h">h</a> + (<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a>)*<a class="local col7 ref" href="#87s" title='s' data-ref="87s">s</a>;</td></tr>
<tr><th id="53">53</th><td>	<b>return</b> <a class="local col8 ref" href="#88h" title='h' data-ref="88h">h</a>;</td></tr>
<tr><th id="54">54</th><td>}</td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><u>#define <dfn class="macro" id="_M/kh_str_hash_func" data-ref="_M/kh_str_hash_func">kh_str_hash_func</dfn>(key) __ac_X31_hash_string(key)</u></td></tr>
<tr><th id="57">57</th><td><u>#define <dfn class="macro" id="_M/kh_str_hash_equal" data-ref="_M/kh_str_hash_equal">kh_str_hash_equal</dfn>(a, b) (strcmp(a, b) == 0)</u></td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td><em>static</em> <em>const</em> <em>double</em> <dfn class="decl def" id="__ac_HASH_UPPER" title='__ac_HASH_UPPER' data-ref="__ac_HASH_UPPER">__ac_HASH_UPPER</dfn> = <var>0.77</var>;</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><u>#define <dfn class="macro" id="_M/__KHASH_TYPE" data-ref="_M/__KHASH_TYPE">__KHASH_TYPE</dfn>(name, khkey_t, khval_t) \</u></td></tr>
<tr><th id="62">62</th><td><u>	typedef struct { \</u></td></tr>
<tr><th id="63">63</th><td><u>		<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="decl" id="(anonymous)::n_buckets" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</dfn>, <dfn class="decl" id="(anonymous)::size" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</dfn>, <dfn class="decl" id="(anonymous)::n_occupied" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied">n_occupied</dfn>, <dfn class="decl" id="(anonymous)::upper_bound" title='(anonymous struct)::upper_bound' data-ref="(anonymous)::upper_bound">upper_bound</dfn>; \</u></td></tr>
<tr><th id="64">64</th><td><u>		<a class="typedef" href="#khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</a> *<dfn class="decl" id="(anonymous)::flags" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</dfn>; \</u></td></tr>
<tr><th id="65">65</th><td><u>		khkey_t *<dfn class="decl" id="(anonymous)::keys" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</dfn>; \</u></td></tr>
<tr><th id="66">66</th><td><u>		khval_t *<dfn class="decl" id="(anonymous)::vals" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</dfn>; \</u></td></tr>
<tr><th id="67">67</th><td><u>	} kh_##name##_t;</u></td></tr>
<tr><th id="68">68</th><td></td></tr>
<tr><th id="69">69</th><td><u>#define <dfn class="macro" id="_M/__KHASH_PROTOTYPES" data-ref="_M/__KHASH_PROTOTYPES">__KHASH_PROTOTYPES</dfn>(name, khkey_t, khval_t)	 					\</u></td></tr>
<tr><th id="70">70</th><td><u>	extern kh_##name##_t *kh_init_##name(void);							\</u></td></tr>
<tr><th id="71">71</th><td><u>	extern void kh_destroy_##name(kh_##name##_t *h);					\</u></td></tr>
<tr><th id="72">72</th><td><u>	extern void kh_clear_##name(kh_##name##_t *h);						\</u></td></tr>
<tr><th id="73">73</th><td><u>	extern khint_t kh_get_##name(const kh_##name##_t *h, khkey_t key); 	\</u></td></tr>
<tr><th id="74">74</th><td><u>	extern int kh_resize_##name(kh_##name##_t *h, khint_t new_n_buckets); \</u></td></tr>
<tr><th id="75">75</th><td><u>	extern khint_t kh_put_##name(kh_##name##_t *h, khkey_t key, int *ret); \</u></td></tr>
<tr><th id="76">76</th><td><u>	extern void kh_del_##name(kh_##name##_t *h, khint_t x);</u></td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><u>#define <dfn class="macro" id="_M/__KHASH_IMPL" data-ref="_M/__KHASH_IMPL">__KHASH_IMPL</dfn>(name, SCOPE, khkey_t, khval_t, kh_is_map, __hash_func, __hash_equal) \</u></td></tr>
<tr><th id="79">79</th><td><u>	SCOPE kh_##name##_t *kh_init_##name(void) {							\</u></td></tr>
<tr><th id="80">80</th><td><u>		return (kh_##name##_t*)<a class="ref" href="git-compat-util.h.html#xcalloc" title='xcalloc' data-ref="xcalloc">xcalloc</a>(1, sizeof(kh_##name##_t));		\</u></td></tr>
<tr><th id="81">81</th><td><u>	}																	\</u></td></tr>
<tr><th id="82">82</th><td><u>	SCOPE void kh_destroy_##name(kh_##name##_t *<dfn class="local col9 decl" id="89h" title='h' data-type='kh_sha1_t *' data-ref="89h"><dfn class="local col2 decl" id="122h" title='h' data-type='kh_sha1_pos_t *' data-ref="122h">h</dfn></dfn>)						\</u></td></tr>
<tr><th id="83">83</th><td><u>	{																	\</u></td></tr>
<tr><th id="84">84</th><td><u>		if (<a class="local col9 ref" href="#321" title='h' data-ref="89h"><a class="local col2 ref" href="#324" title='h' data-ref="122h">h</a></a>) {														\</u></td></tr>
<tr><th id="85">85</th><td><u>			<a class="ref" href="../include/stdlib.h.html#free" title='free' data-ref="free">free</a>((void *)<a class="local col9 ref" href="#321" title='h' data-ref="89h"><a class="local col2 ref" href="#324" title='h' data-ref="122h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>); <a class="ref" href="../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col9 ref" href="#321" title='h' data-ref="89h"><a class="local col2 ref" href="#324" title='h' data-ref="122h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>);					\</u></td></tr>
<tr><th id="86">86</th><td><u>			<a class="ref" href="../include/stdlib.h.html#free" title='free' data-ref="free">free</a>((void *)<a class="local col9 ref" href="#321" title='h' data-ref="89h"><a class="local col2 ref" href="#324" title='h' data-ref="122h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a>);										\</u></td></tr>
<tr><th id="87">87</th><td><u>			<a class="ref" href="../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col9 ref" href="#321" title='h' data-ref="89h"><a class="local col2 ref" href="#324" title='h' data-ref="122h">h</a></a>);													\</u></td></tr>
<tr><th id="88">88</th><td><u>		}																\</u></td></tr>
<tr><th id="89">89</th><td><u>	}																	\</u></td></tr>
<tr><th id="90">90</th><td><u>	SCOPE void kh_clear_##name(kh_##name##_t *<dfn class="local col0 decl" id="90h" title='h' data-type='kh_sha1_t *' data-ref="90h"><dfn class="local col3 decl" id="123h" title='h' data-type='kh_sha1_pos_t *' data-ref="123h">h</dfn></dfn>)						\</u></td></tr>
<tr><th id="91">91</th><td><u>	{																	\</u></td></tr>
<tr><th id="92">92</th><td><u>		if (<a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a> &amp;&amp; <a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>) {											\</u></td></tr>
<tr><th id="93">93</th><td><u>			<a class="ref" href="../include/string.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, 0xaa, __ac_fsize(<a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a></a>) * sizeof(<a class="typedef" href="#khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</a>)); \</u></td></tr>
<tr><th id="94">94</th><td><u>			<a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a> = <a class="local col0 ref" href="#321" title='h' data-ref="90h"><a class="local col3 ref" href="#324" title='h' data-ref="123h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied"><a class="ref" href="#324" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied">n_occupied</a></a> = 0;								\</u></td></tr>
<tr><th id="95">95</th><td><u>		}																\</u></td></tr>
<tr><th id="96">96</th><td><u>	}																	\</u></td></tr>
<tr><th id="97">97</th><td><u>	SCOPE <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> kh_get_##name(const kh_##name##_t *<dfn class="local col1 decl" id="91h" title='h' data-type='const kh_sha1_t *' data-ref="91h"><dfn class="local col4 decl" id="124h" title='h' data-type='const kh_sha1_pos_t *' data-ref="124h">h</dfn></dfn>, khkey_t <dfn class="local col2 decl" id="92key" title='key' data-type='const unsigned char *' data-ref="92key"><dfn class="local col5 decl" id="125key" title='key' data-type='const unsigned char *' data-ref="125key">key</dfn></dfn>) 	\</u></td></tr>
<tr><th id="98">98</th><td><u>	{																	\</u></td></tr>
<tr><th id="99">99</th><td><u>		if (<a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>) {												\</u></td></tr>
<tr><th id="100">100</th><td><u>			<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col3 decl" id="93k" title='k' data-type='khint_t' data-ref="93k"><dfn class="local col6 decl" id="126k" title='k' data-type='khint_t' data-ref="126k">k</dfn></dfn>, <dfn class="local col4 decl" id="94i" title='i' data-type='khint_t' data-ref="94i"><dfn class="local col7 decl" id="127i" title='i' data-type='khint_t' data-ref="127i">i</dfn></dfn>, <dfn class="local col5 decl" id="95last" title='last' data-type='khint_t' data-ref="95last"><dfn class="local col8 decl" id="128last" title='last' data-type='khint_t' data-ref="128last">last</dfn></dfn>, <dfn class="local col6 decl" id="96mask" title='mask' data-type='khint_t' data-ref="96mask"><dfn class="local col9 decl" id="129mask" title='mask' data-type='khint_t' data-ref="129mask">mask</dfn></dfn>, <dfn class="local col7 decl" id="97step" title='step' data-type='khint_t' data-ref="97step"><dfn class="local col0 decl" id="130step" title='step' data-type='khint_t' data-ref="130step">step</dfn></dfn> = 0; \</u></td></tr>
<tr><th id="101">101</th><td><u>			<a class="local col6 ref" href="#321" title='mask' data-ref="96mask"><a class="local col9 ref" href="#324" title='mask' data-ref="129mask">mask</a></a> = <a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> - 1;									\</u></td></tr>
<tr><th id="102">102</th><td><u>			<a class="local col3 ref" href="#321" title='k' data-ref="93k"><a class="local col6 ref" href="#324" title='k' data-ref="126k">k</a></a> = __hash_func(<a class="local col2 ref" href="#321" title='key' data-ref="92key"><a class="local col5 ref" href="#324" title='key' data-ref="125key">key</a></a>); <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a> = <a class="local col3 ref" href="#321" title='k' data-ref="93k"><a class="local col6 ref" href="#324" title='k' data-ref="126k">k</a></a> &amp; <a class="local col6 ref" href="#321" title='mask' data-ref="96mask"><a class="local col9 ref" href="#324" title='mask' data-ref="129mask">mask</a></a>;							\</u></td></tr>
<tr><th id="103">103</th><td><u>			<a class="local col5 ref" href="#321" title='last' data-ref="95last"><a class="local col8 ref" href="#324" title='last' data-ref="128last">last</a></a> = <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a>; \</u></td></tr>
<tr><th id="104">104</th><td><u>			while (!__ac_isempty(<a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a></a>) &amp;&amp; (__ac_isdel(<a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a></a>) || !__hash_equal(<a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a>], <a class="local col2 ref" href="#321" title='key' data-ref="92key"><a class="local col5 ref" href="#324" title='key' data-ref="125key">key</a></a>))) { \</u></td></tr>
<tr><th id="105">105</th><td><u>				<a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a> = (<a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a> + (++<a class="local col7 ref" href="#321" title='step' data-ref="97step"><a class="local col0 ref" href="#324" title='step' data-ref="130step">step</a></a>)) &amp; <a class="local col6 ref" href="#321" title='mask' data-ref="96mask"><a class="local col9 ref" href="#324" title='mask' data-ref="129mask">mask</a></a>; \</u></td></tr>
<tr><th id="106">106</th><td><u>				if (<a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a> == <a class="local col5 ref" href="#321" title='last' data-ref="95last"><a class="local col8 ref" href="#324" title='last' data-ref="128last">last</a></a>) return <a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>;						\</u></td></tr>
<tr><th id="107">107</th><td><u>			}															\</u></td></tr>
<tr><th id="108">108</th><td><u>			return __ac_iseither(<a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a></a>)? <a class="local col1 ref" href="#321" title='h' data-ref="91h"><a class="local col4 ref" href="#324" title='h' data-ref="124h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> : <a class="local col4 ref" href="#321" title='i' data-ref="94i"><a class="local col7 ref" href="#324" title='i' data-ref="127i">i</a></a>;		\</u></td></tr>
<tr><th id="109">109</th><td><u>		} else return 0;												\</u></td></tr>
<tr><th id="110">110</th><td><u>	}																	\</u></td></tr>
<tr><th id="111">111</th><td><u>	SCOPE int kh_resize_##name(kh_##name##_t *<dfn class="local col8 decl" id="98h" title='h' data-type='kh_sha1_t *' data-ref="98h"><dfn class="local col1 decl" id="131h" title='h' data-type='kh_sha1_pos_t *' data-ref="131h">h</dfn></dfn>, <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col9 decl" id="99new_n_buckets" title='new_n_buckets' data-type='khint_t' data-ref="99new_n_buckets"><dfn class="local col2 decl" id="132new_n_buckets" title='new_n_buckets' data-type='khint_t' data-ref="132new_n_buckets">new_n_buckets</dfn></dfn>) \</u></td></tr>
<tr><th id="112">112</th><td><u>	{ /* This function uses 0.25*n_buckets bytes of working space instead of [sizeof(key_t+val_t)+.25]*n_buckets. */ \</u></td></tr>
<tr><th id="113">113</th><td><u>		<a class="typedef" href="#khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</a> *<dfn class="local col0 decl" id="100new_flags" title='new_flags' data-type='khint32_t *' data-ref="100new_flags"><dfn class="local col3 decl" id="133new_flags" title='new_flags' data-type='khint32_t *' data-ref="133new_flags">new_flags</dfn></dfn> = NULL;										\</u></td></tr>
<tr><th id="114">114</th><td><u>		<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col1 decl" id="101j" title='j' data-type='khint_t' data-ref="101j"><dfn class="local col4 decl" id="134j" title='j' data-type='khint_t' data-ref="134j">j</dfn></dfn> = 1;													\</u></td></tr>
<tr><th id="115">115</th><td><u>		{																\</u></td></tr>
<tr><th id="116">116</th><td><u>			kroundup32(<a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a></a></a></a></a></a></a></a></a></a></a></a>); 									\</u></td></tr>
<tr><th id="117">117</th><td><u>			if (<a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a> &lt; 4) <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a> = 4;					\</u></td></tr>
<tr><th id="118">118</th><td><u>			if (<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a> &gt;= (<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a>)(<a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a> * <a class="ref" href="#__ac_HASH_UPPER" title='__ac_HASH_UPPER' data-ref="__ac_HASH_UPPER">__ac_HASH_UPPER</a> + 0.5)) <a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a> = 0;	/* requested size is too small */ \</u></td></tr>
<tr><th id="119">119</th><td><u>			else { /* hash table size to be changed (shrink or expand); rehash */ \</u></td></tr>
<tr><th id="120">120</th><td><u>				ALLOC_ARRAY(<a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a></a>, __ac_fsize(<a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a></a>)); \</u></td></tr>
<tr><th id="121">121</th><td><u>				if (!<a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a>) return -1;								\</u></td></tr>
<tr><th id="122">122</th><td><u>				<a class="ref" href="../include/string.h.html#memset" title='memset' data-ref="memset">memset</a>(<a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a>, 0xaa, __ac_fsize(<a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a></a>) * sizeof(<a class="typedef" href="#khint32_t" title='khint32_t' data-type='uint32_t' data-ref="khint32_t">khint32_t</a>)); \</u></td></tr>
<tr><th id="123">123</th><td><u>				if (<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> &lt; <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>) {	/* expand */		\</u></td></tr>
<tr><th id="124">124</th><td><u>					REALLOC_ARRAY(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a></a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a></a></a>, <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>); \</u></td></tr>
<tr><th id="125">125</th><td><u>					if (kh_is_map) {									\</u></td></tr>
<tr><th id="126">126</th><td><u>						REALLOC_ARRAY(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a></a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a></a></a>, <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>); \</u></td></tr>
<tr><th id="127">127</th><td><u>					}													\</u></td></tr>
<tr><th id="128">128</th><td><u>				} /* otherwise shrink */								\</u></td></tr>
<tr><th id="129">129</th><td><u>			}															\</u></td></tr>
<tr><th id="130">130</th><td><u>		}																\</u></td></tr>
<tr><th id="131">131</th><td><u>		if (<a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a>) { /* rehashing is needed */								\</u></td></tr>
<tr><th id="132">132</th><td><u>			for (<a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a> = 0; <a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a> != <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>; ++<a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a>) {						\</u></td></tr>
<tr><th id="133">133</th><td><u>				if (__ac_iseither(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a></a>) == 0) {					\</u></td></tr>
<tr><th id="134">134</th><td><u>					khkey_t <dfn class="local col2 decl" id="102key" title='key' data-type='const unsigned char *' data-ref="102key"><dfn class="local col5 decl" id="135key" title='key' data-type='const unsigned char *' data-ref="135key">key</dfn></dfn> = <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a>];							\</u></td></tr>
<tr><th id="135">135</th><td><u>					khval_t <dfn class="local col3 decl" id="103val" title='val' data-type='void *' data-ref="103val"><dfn class="local col6 decl" id="136val" title='val' data-type='int' data-ref="136val">val</dfn></dfn>;										\</u></td></tr>
<tr><th id="136">136</th><td><u>					<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col4 decl" id="104new_mask" title='new_mask' data-type='khint_t' data-ref="104new_mask"><dfn class="local col7 decl" id="137new_mask" title='new_mask' data-type='khint_t' data-ref="137new_mask">new_mask</dfn></dfn>;									\</u></td></tr>
<tr><th id="137">137</th><td><u>					<a class="local col4 ref" href="#321" title='new_mask' data-ref="104new_mask"><a class="local col7 ref" href="#324" title='new_mask' data-ref="137new_mask">new_mask</a></a> = <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a> - 1; 						\</u></td></tr>
<tr><th id="138">138</th><td><u>					if (kh_is_map) <a class="local col3 ref" href="#321" title='val' data-ref="103val"><a class="local col6 ref" href="#324" title='val' data-ref="136val">val</a></a> = <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a>[<a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a>];					\</u></td></tr>
<tr><th id="139">139</th><td><u>					__ac_set_isdel_true(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col1 ref" href="#321" title='j' data-ref="101j"><a class="local col4 ref" href="#324" title='j' data-ref="134j"><a class="local col4 ref" href="#324" title='j' data-ref="134j">j</a></a></a>);					\</u></td></tr>
<tr><th id="140">140</th><td><u>					while (1) { /* kick-out process; sort of like in Cuckoo hashing */ \</u></td></tr>
<tr><th id="141">141</th><td><u>						<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col5 decl" id="105k" title='k' data-type='khint_t' data-ref="105k"><dfn class="local col8 decl" id="138k" title='k' data-type='khint_t' data-ref="138k">k</dfn></dfn>, <dfn class="local col6 decl" id="106i" title='i' data-type='khint_t' data-ref="106i"><dfn class="local col9 decl" id="139i" title='i' data-type='khint_t' data-ref="139i">i</dfn></dfn>, <dfn class="local col7 decl" id="107step" title='step' data-type='khint_t' data-ref="107step"><dfn class="local col0 decl" id="140step" title='step' data-type='khint_t' data-ref="140step">step</dfn></dfn> = 0; \</u></td></tr>
<tr><th id="142">142</th><td><u>						<a class="local col5 ref" href="#321" title='k' data-ref="105k"><a class="local col8 ref" href="#324" title='k' data-ref="138k">k</a></a> = __hash_func(<a class="local col2 ref" href="#321" title='key' data-ref="102key"><a class="local col5 ref" href="#324" title='key' data-ref="135key">key</a></a>);							\</u></td></tr>
<tr><th id="143">143</th><td><u>						<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a> = <a class="local col5 ref" href="#321" title='k' data-ref="105k"><a class="local col8 ref" href="#324" title='k' data-ref="138k">k</a></a> &amp; <a class="local col4 ref" href="#321" title='new_mask' data-ref="104new_mask"><a class="local col7 ref" href="#324" title='new_mask' data-ref="137new_mask">new_mask</a></a>;								\</u></td></tr>
<tr><th id="144">144</th><td><u>						while (!__ac_isempty(<a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a>, <a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a></a>)) <a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a> = (<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a> + (++<a class="local col7 ref" href="#321" title='step' data-ref="107step"><a class="local col0 ref" href="#324" title='step' data-ref="140step">step</a></a>)) &amp; <a class="local col4 ref" href="#321" title='new_mask' data-ref="104new_mask"><a class="local col7 ref" href="#324" title='new_mask' data-ref="137new_mask">new_mask</a></a>; \</u></td></tr>
<tr><th id="145">145</th><td><u>						__ac_set_isempty_false(<a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a>, <a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a></a>);			\</u></td></tr>
<tr><th id="146">146</th><td><u>						if (<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a> &lt; <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> &amp;&amp; __ac_iseither(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a></a>) == 0) { /* kick out the existing element */ \</u></td></tr>
<tr><th id="147">147</th><td><u>							{ khkey_t <dfn class="local col8 decl" id="108tmp" title='tmp' data-type='const unsigned char *' data-ref="108tmp"><dfn class="local col1 decl" id="141tmp" title='tmp' data-type='const unsigned char *' data-ref="141tmp">tmp</dfn></dfn> = <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>]; <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>] = <a class="local col2 ref" href="#321" title='key' data-ref="102key"><a class="local col5 ref" href="#324" title='key' data-ref="135key">key</a></a>; <a class="local col2 ref" href="#321" title='key' data-ref="102key"><a class="local col5 ref" href="#324" title='key' data-ref="135key">key</a></a> = <a class="local col8 ref" href="#321" title='tmp' data-ref="108tmp"><a class="local col1 ref" href="#324" title='tmp' data-ref="141tmp">tmp</a></a>; } \</u></td></tr>
<tr><th id="148">148</th><td><u>							if (kh_is_map) { khval_t <dfn class="local col9 decl" id="109tmp" title='tmp' data-type='void *' data-ref="109tmp"><dfn class="local col2 decl" id="142tmp" title='tmp' data-type='int' data-ref="142tmp">tmp</dfn></dfn> = <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>]; <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>] = <a class="local col3 ref" href="#321" title='val' data-ref="103val"><a class="local col6 ref" href="#324" title='val' data-ref="136val">val</a></a>; <a class="local col3 ref" href="#321" title='val' data-ref="103val"><a class="local col6 ref" href="#324" title='val' data-ref="136val">val</a></a> = <a class="local col9 ref" href="#321" title='tmp' data-ref="109tmp"><a class="local col2 ref" href="#324" title='tmp' data-ref="142tmp">tmp</a></a>; } \</u></td></tr>
<tr><th id="149">149</th><td><u>							__ac_set_isdel_true(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a></a>); /* mark it as deleted in the old hash table */ \</u></td></tr>
<tr><th id="150">150</th><td><u>						} else { /* write the element and jump out of the loop */ \</u></td></tr>
<tr><th id="151">151</th><td><u>							<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>] = <a class="local col2 ref" href="#321" title='key' data-ref="102key"><a class="local col5 ref" href="#324" title='key' data-ref="135key">key</a></a>;							\</u></td></tr>
<tr><th id="152">152</th><td><u>							if (kh_is_map) <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a>[<a class="local col6 ref" href="#321" title='i' data-ref="106i"><a class="local col9 ref" href="#324" title='i' data-ref="139i">i</a></a>] = <a class="local col3 ref" href="#321" title='val' data-ref="103val"><a class="local col6 ref" href="#324" title='val' data-ref="136val">val</a></a>;			\</u></td></tr>
<tr><th id="153">153</th><td><u>							break;										\</u></td></tr>
<tr><th id="154">154</th><td><u>						}												\</u></td></tr>
<tr><th id="155">155</th><td><u>					}													\</u></td></tr>
<tr><th id="156">156</th><td><u>				}														\</u></td></tr>
<tr><th id="157">157</th><td><u>			}															\</u></td></tr>
<tr><th id="158">158</th><td><u>			if (<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> &gt; <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>) { /* shrink the hash table */ \</u></td></tr>
<tr><th id="159">159</th><td><u>				REALLOC_ARRAY(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a></a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a></a></a>, <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>); \</u></td></tr>
<tr><th id="160">160</th><td><u>				if (kh_is_map) REALLOC_ARRAY(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a></a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals"><a class="ref" href="#324" title='(anonymous struct)::vals' data-ref="(anonymous)::vals">vals</a></a></a></a>, <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>); \</u></td></tr>
<tr><th id="161">161</th><td><u>			}															\</u></td></tr>
<tr><th id="162">162</th><td><u>			<a class="ref" href="../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>); /* free the working space */				\</u></td></tr>
<tr><th id="163">163</th><td><u>			<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a> = <a class="local col0 ref" href="#321" title='new_flags' data-ref="100new_flags"><a class="local col3 ref" href="#324" title='new_flags' data-ref="133new_flags">new_flags</a></a>;										\</u></td></tr>
<tr><th id="164">164</th><td><u>			<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> = <a class="local col9 ref" href="#321" title='new_n_buckets' data-ref="99new_n_buckets"><a class="local col2 ref" href="#324" title='new_n_buckets' data-ref="132new_n_buckets">new_n_buckets</a></a>;								\</u></td></tr>
<tr><th id="165">165</th><td><u>			<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied"><a class="ref" href="#324" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied">n_occupied</a></a> = <a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a>;									\</u></td></tr>
<tr><th id="166">166</th><td><u>			<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::upper_bound' data-ref="(anonymous)::upper_bound"><a class="ref" href="#324" title='(anonymous struct)::upper_bound' data-ref="(anonymous)::upper_bound">upper_bound</a></a> = (<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a>)(<a class="local col8 ref" href="#321" title='h' data-ref="98h"><a class="local col1 ref" href="#324" title='h' data-ref="131h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> * <a class="ref" href="#__ac_HASH_UPPER" title='__ac_HASH_UPPER' data-ref="__ac_HASH_UPPER">__ac_HASH_UPPER</a> + 0.5); \</u></td></tr>
<tr><th id="167">167</th><td><u>		}																\</u></td></tr>
<tr><th id="168">168</th><td><u>		return 0;														\</u></td></tr>
<tr><th id="169">169</th><td><u>	}																	\</u></td></tr>
<tr><th id="170">170</th><td><u>	SCOPE <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> kh_put_##name(kh_##name##_t *<dfn class="local col0 decl" id="110h" title='h' data-type='kh_sha1_t *' data-ref="110h"><dfn class="local col3 decl" id="143h" title='h' data-type='kh_sha1_pos_t *' data-ref="143h">h</dfn></dfn>, khkey_t <dfn class="local col1 decl" id="111key" title='key' data-type='const unsigned char *' data-ref="111key"><dfn class="local col4 decl" id="144key" title='key' data-type='const unsigned char *' data-ref="144key">key</dfn></dfn>, int *<dfn class="local col2 decl" id="112ret" title='ret' data-type='int *' data-ref="112ret"><dfn class="local col5 decl" id="145ret" title='ret' data-type='int *' data-ref="145ret">ret</dfn></dfn>) \</u></td></tr>
<tr><th id="171">171</th><td><u>	{																	\</u></td></tr>
<tr><th id="172">172</th><td><u>		<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col3 decl" id="113x" title='x' data-type='khint_t' data-ref="113x"><dfn class="local col6 decl" id="146x" title='x' data-type='khint_t' data-ref="146x">x</dfn></dfn>;														\</u></td></tr>
<tr><th id="173">173</th><td><u>		if (<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied"><a class="ref" href="#324" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied">n_occupied</a></a> &gt;= <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::upper_bound' data-ref="(anonymous)::upper_bound"><a class="ref" href="#324" title='(anonymous struct)::upper_bound' data-ref="(anonymous)::upper_bound">upper_bound</a></a>) { /* update the hash table */ \</u></td></tr>
<tr><th id="174">174</th><td><u>			if (<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> &gt; (<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a>&lt;&lt;1)) {							\</u></td></tr>
<tr><th id="175">175</th><td><u>				if (kh_resize_##name(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>, <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> - 1) &lt; 0) { /* clear "deleted" elements */ \</u></td></tr>
<tr><th id="176">176</th><td><u>					*<a class="local col2 ref" href="#321" title='ret' data-ref="112ret"><a class="local col5 ref" href="#324" title='ret' data-ref="145ret">ret</a></a> = -1; return <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>;						\</u></td></tr>
<tr><th id="177">177</th><td><u>				}														\</u></td></tr>
<tr><th id="178">178</th><td><u>			} else if (kh_resize_##name(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>, <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> + 1) &lt; 0) { /* expand the hash table */ \</u></td></tr>
<tr><th id="179">179</th><td><u>				*<a class="local col2 ref" href="#321" title='ret' data-ref="112ret"><a class="local col5 ref" href="#324" title='ret' data-ref="145ret">ret</a></a> = -1; return <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>;							\</u></td></tr>
<tr><th id="180">180</th><td><u>			}															\</u></td></tr>
<tr><th id="181">181</th><td><u>		} /* TODO: to implement automatically shrinking; resize() already support shrinking */ \</u></td></tr>
<tr><th id="182">182</th><td><u>		{																\</u></td></tr>
<tr><th id="183">183</th><td><u>			<a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col4 decl" id="114k" title='k' data-type='khint_t' data-ref="114k"><dfn class="local col7 decl" id="147k" title='k' data-type='khint_t' data-ref="147k">k</dfn></dfn>, <dfn class="local col5 decl" id="115i" title='i' data-type='khint_t' data-ref="115i"><dfn class="local col8 decl" id="148i" title='i' data-type='khint_t' data-ref="148i">i</dfn></dfn>, <dfn class="local col6 decl" id="116site" title='site' data-type='khint_t' data-ref="116site"><dfn class="local col9 decl" id="149site" title='site' data-type='khint_t' data-ref="149site">site</dfn></dfn>, <dfn class="local col7 decl" id="117last" title='last' data-type='khint_t' data-ref="117last"><dfn class="local col0 decl" id="150last" title='last' data-type='khint_t' data-ref="150last">last</dfn></dfn>, <dfn class="local col8 decl" id="118mask" title='mask' data-type='khint_t' data-ref="118mask"><dfn class="local col1 decl" id="151mask" title='mask' data-type='khint_t' data-ref="151mask">mask</dfn></dfn> = <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> - 1, <dfn class="local col9 decl" id="119step" title='step' data-type='khint_t' data-ref="119step"><dfn class="local col2 decl" id="152step" title='step' data-type='khint_t' data-ref="152step">step</dfn></dfn> = 0; \</u></td></tr>
<tr><th id="184">184</th><td><u>			<a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> = <a class="local col6 ref" href="#321" title='site' data-ref="116site"><a class="local col9 ref" href="#324" title='site' data-ref="149site">site</a></a> = <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>; <a class="local col4 ref" href="#321" title='k' data-ref="114k"><a class="local col7 ref" href="#324" title='k' data-ref="147k">k</a></a> = __hash_func(<a class="local col1 ref" href="#321" title='key' data-ref="111key"><a class="local col4 ref" href="#324" title='key' data-ref="144key">key</a></a>); <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a> = <a class="local col4 ref" href="#321" title='k' data-ref="114k"><a class="local col7 ref" href="#324" title='k' data-ref="147k">k</a></a> &amp; <a class="local col8 ref" href="#321" title='mask' data-ref="118mask"><a class="local col1 ref" href="#324" title='mask' data-ref="151mask">mask</a></a>; \</u></td></tr>
<tr><th id="185">185</th><td><u>			if (__ac_isempty(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a></a>)) <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> = <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a>; /* for speed up */	\</u></td></tr>
<tr><th id="186">186</th><td><u>			else {														\</u></td></tr>
<tr><th id="187">187</th><td><u>				<a class="local col7 ref" href="#321" title='last' data-ref="117last"><a class="local col0 ref" href="#324" title='last' data-ref="150last">last</a></a> = <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a>; \</u></td></tr>
<tr><th id="188">188</th><td><u>				while (!__ac_isempty(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a></a>) &amp;&amp; (__ac_isdel(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a></a>) || !__hash_equal(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a>], <a class="local col1 ref" href="#321" title='key' data-ref="111key"><a class="local col4 ref" href="#324" title='key' data-ref="144key">key</a></a>))) { \</u></td></tr>
<tr><th id="189">189</th><td><u>					if (__ac_isdel(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a></a>)) <a class="local col6 ref" href="#321" title='site' data-ref="116site"><a class="local col9 ref" href="#324" title='site' data-ref="149site">site</a></a> = <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a>;				\</u></td></tr>
<tr><th id="190">190</th><td><u>					<a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a> = (<a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a> + (++<a class="local col9 ref" href="#321" title='step' data-ref="119step"><a class="local col2 ref" href="#324" title='step' data-ref="152step">step</a></a>)) &amp; <a class="local col8 ref" href="#321" title='mask' data-ref="118mask"><a class="local col1 ref" href="#324" title='mask' data-ref="151mask">mask</a></a>; \</u></td></tr>
<tr><th id="191">191</th><td><u>					if (<a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a> == <a class="local col7 ref" href="#321" title='last' data-ref="117last"><a class="local col0 ref" href="#324" title='last' data-ref="150last">last</a></a>) { <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> = <a class="local col6 ref" href="#321" title='site' data-ref="116site"><a class="local col9 ref" href="#324" title='site' data-ref="149site">site</a></a>; break; }					\</u></td></tr>
<tr><th id="192">192</th><td><u>				}														\</u></td></tr>
<tr><th id="193">193</th><td><u>				if (<a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> == <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>) {								\</u></td></tr>
<tr><th id="194">194</th><td><u>					if (__ac_isempty(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a></a>) &amp;&amp; <a class="local col6 ref" href="#321" title='site' data-ref="116site"><a class="local col9 ref" href="#324" title='site' data-ref="149site">site</a></a> != <a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a>) <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> = <a class="local col6 ref" href="#321" title='site' data-ref="116site"><a class="local col9 ref" href="#324" title='site' data-ref="149site">site</a></a>; \</u></td></tr>
<tr><th id="195">195</th><td><u>					else <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a> = <a class="local col5 ref" href="#321" title='i' data-ref="115i"><a class="local col8 ref" href="#324" title='i' data-ref="148i">i</a></a>;											\</u></td></tr>
<tr><th id="196">196</th><td><u>				}														\</u></td></tr>
<tr><th id="197">197</th><td><u>			}															\</u></td></tr>
<tr><th id="198">198</th><td><u>		}																\</u></td></tr>
<tr><th id="199">199</th><td><u>		if (__ac_isempty(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a></a>)) { /* not present at all */		\</u></td></tr>
<tr><th id="200">200</th><td><u>			<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a>] = <a class="local col1 ref" href="#321" title='key' data-ref="111key"><a class="local col4 ref" href="#324" title='key' data-ref="144key">key</a></a>;											\</u></td></tr>
<tr><th id="201">201</th><td><u>			__ac_set_isboth_false(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a></a>);							\</u></td></tr>
<tr><th id="202">202</th><td><u>			++<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a>; ++<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied"><a class="ref" href="#324" title='(anonymous struct)::n_occupied' data-ref="(anonymous)::n_occupied">n_occupied</a></a>;									\</u></td></tr>
<tr><th id="203">203</th><td><u>			*<a class="local col2 ref" href="#321" title='ret' data-ref="112ret"><a class="local col5 ref" href="#324" title='ret' data-ref="145ret">ret</a></a> = 1;													\</u></td></tr>
<tr><th id="204">204</th><td><u>		} else if (__ac_isdel(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a></a>)) { /* deleted */				\</u></td></tr>
<tr><th id="205">205</th><td><u>			<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::keys' data-ref="(anonymous)::keys"><a class="ref" href="#324" title='(anonymous struct)::keys' data-ref="(anonymous)::keys">keys</a></a>[<a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a>] = <a class="local col1 ref" href="#321" title='key' data-ref="111key"><a class="local col4 ref" href="#324" title='key' data-ref="144key">key</a></a>;											\</u></td></tr>
<tr><th id="206">206</th><td><u>			__ac_set_isboth_false(<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a></a>);							\</u></td></tr>
<tr><th id="207">207</th><td><u>			++<a class="local col0 ref" href="#321" title='h' data-ref="110h"><a class="local col3 ref" href="#324" title='h' data-ref="143h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a>;													\</u></td></tr>
<tr><th id="208">208</th><td><u>			*<a class="local col2 ref" href="#321" title='ret' data-ref="112ret"><a class="local col5 ref" href="#324" title='ret' data-ref="145ret">ret</a></a> = 2;													\</u></td></tr>
<tr><th id="209">209</th><td><u>		} else *<a class="local col2 ref" href="#321" title='ret' data-ref="112ret"><a class="local col5 ref" href="#324" title='ret' data-ref="145ret">ret</a></a> = 0; /* Don't touch h-&gt;keys[x] if present and not deleted */ \</u></td></tr>
<tr><th id="210">210</th><td><u>		return <a class="local col3 ref" href="#321" title='x' data-ref="113x"><a class="local col6 ref" href="#324" title='x' data-ref="146x">x</a></a>;														\</u></td></tr>
<tr><th id="211">211</th><td><u>	}																	\</u></td></tr>
<tr><th id="212">212</th><td><u>	SCOPE void kh_del_##name(kh_##name##_t *<dfn class="local col0 decl" id="120h" title='h' data-type='kh_sha1_t *' data-ref="120h"><dfn class="local col3 decl" id="153h" title='h' data-type='kh_sha1_pos_t *' data-ref="153h">h</dfn></dfn>, <a class="typedef" href="#khint_t" title='khint_t' data-type='khint32_t' data-ref="khint_t">khint_t</a> <dfn class="local col1 decl" id="121x" title='x' data-type='khint_t' data-ref="121x"><dfn class="local col4 decl" id="154x" title='x' data-type='khint_t' data-ref="154x">x</dfn></dfn>)				\</u></td></tr>
<tr><th id="213">213</th><td><u>	{																	\</u></td></tr>
<tr><th id="214">214</th><td><u>		if (<a class="local col1 ref" href="#321" title='x' data-ref="121x"><a class="local col4 ref" href="#324" title='x' data-ref="154x">x</a></a> != <a class="local col0 ref" href="#321" title='h' data-ref="120h"><a class="local col3 ref" href="#324" title='h' data-ref="153h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets"><a class="ref" href="#324" title='(anonymous struct)::n_buckets' data-ref="(anonymous)::n_buckets">n_buckets</a></a> &amp;&amp; !__ac_iseither(<a class="local col0 ref" href="#321" title='h' data-ref="120h"><a class="local col3 ref" href="#324" title='h' data-ref="153h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col1 ref" href="#321" title='x' data-ref="121x"><a class="local col4 ref" href="#324" title='x' data-ref="154x"><a class="local col4 ref" href="#324" title='x' data-ref="154x">x</a></a></a>)) {			\</u></td></tr>
<tr><th id="215">215</th><td><u>			__ac_set_isdel_true(<a class="local col0 ref" href="#321" title='h' data-ref="120h"><a class="local col3 ref" href="#324" title='h' data-ref="153h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::flags' data-ref="(anonymous)::flags"><a class="ref" href="#324" title='(anonymous struct)::flags' data-ref="(anonymous)::flags">flags</a></a>, <a class="local col1 ref" href="#321" title='x' data-ref="121x"><a class="local col4 ref" href="#324" title='x' data-ref="154x"><a class="local col4 ref" href="#324" title='x' data-ref="154x">x</a></a></a>);							\</u></td></tr>
<tr><th id="216">216</th><td><u>			--<a class="local col0 ref" href="#321" title='h' data-ref="120h"><a class="local col3 ref" href="#324" title='h' data-ref="153h">h</a></a>-&gt;<a class="ref" href="#321" title='(anonymous struct)::size' data-ref="(anonymous)::size"><a class="ref" href="#324" title='(anonymous struct)::size' data-ref="(anonymous)::size">size</a></a>;													\</u></td></tr>
<tr><th id="217">217</th><td><u>		}																\</u></td></tr>
<tr><th id="218">218</th><td><u>	}</u></td></tr>
<tr><th id="219">219</th><td></td></tr>
<tr><th id="220">220</th><td><u>#define <dfn class="macro" id="_M/KHASH_DECLARE" data-ref="_M/KHASH_DECLARE">KHASH_DECLARE</dfn>(name, khkey_t, khval_t)		 					\</u></td></tr>
<tr><th id="221">221</th><td><u>	__KHASH_TYPE(name, khkey_t, khval_t) 								\</u></td></tr>
<tr><th id="222">222</th><td><u>	__KHASH_PROTOTYPES(name, khkey_t, khval_t)</u></td></tr>
<tr><th id="223">223</th><td></td></tr>
<tr><th id="224">224</th><td><u>#define <dfn class="macro" id="_M/KHASH_INIT2" data-ref="_M/KHASH_INIT2">KHASH_INIT2</dfn>(name, SCOPE, khkey_t, khval_t, kh_is_map, __hash_func, __hash_equal) \</u></td></tr>
<tr><th id="225">225</th><td><u>	__KHASH_TYPE(name, khkey_t, khval_t) 								\</u></td></tr>
<tr><th id="226">226</th><td><u>	__KHASH_IMPL(name, SCOPE, khkey_t, khval_t, kh_is_map, __hash_func, __hash_equal)</u></td></tr>
<tr><th id="227">227</th><td></td></tr>
<tr><th id="228">228</th><td><u>#define <dfn class="macro" id="_M/KHASH_INIT" data-ref="_M/KHASH_INIT">KHASH_INIT</dfn>(name, khkey_t, khval_t, kh_is_map, __hash_func, __hash_equal) \</u></td></tr>
<tr><th id="229">229</th><td><u>	KHASH_INIT2(name, static inline, khkey_t, khval_t, kh_is_map, __hash_func, __hash_equal)</u></td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td><i>/* Other convenient macros... */</i></td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="234">234</th><td><i class="doc">  <span class="command">@abstract</span>     Test whether a bucket contains data.</i></td></tr>
<tr><th id="235">235</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="236">236</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">x</span>     Iterator to the bucket [khint_t]</i></td></tr>
<tr><th id="237">237</th><td><i class="doc">  <span class="command">@return</span>       1 if containing data; 0 otherwise [int]</i></td></tr>
<tr><th id="238">238</th><td><i class="doc"> */</i></td></tr>
<tr><th id="239">239</th><td><u>#define <dfn class="macro" id="_M/kh_exist" data-ref="_M/kh_exist">kh_exist</dfn>(h, x) (!__ac_iseither((h)-&gt;flags, (x)))</u></td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="242">242</th><td><i class="doc">  <span class="command">@abstract</span>     Get key given an iterator</i></td></tr>
<tr><th id="243">243</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="244">244</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">x</span>     Iterator to the bucket [khint_t]</i></td></tr>
<tr><th id="245">245</th><td><i class="doc">  <span class="command">@return</span>       Key [type of keys]</i></td></tr>
<tr><th id="246">246</th><td><i class="doc"> */</i></td></tr>
<tr><th id="247">247</th><td><u>#define <dfn class="macro" id="_M/kh_key" data-ref="_M/kh_key">kh_key</dfn>(h, x) ((h)-&gt;keys[x])</u></td></tr>
<tr><th id="248">248</th><td></td></tr>
<tr><th id="249">249</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="250">250</th><td><i class="doc">  <span class="command">@abstract</span>     Get value given an iterator</i></td></tr>
<tr><th id="251">251</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="252">252</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">x</span>     Iterator to the bucket [khint_t]</i></td></tr>
<tr><th id="253">253</th><td><i class="doc">  <span class="command">@return</span>       Value [type of values]</i></td></tr>
<tr><th id="254">254</th><td><i class="doc">  <span class="command">@discussion</span>   For hash sets, calling this results in segfault.</i></td></tr>
<tr><th id="255">255</th><td><i class="doc"> */</i></td></tr>
<tr><th id="256">256</th><td><u>#define <dfn class="macro" id="_M/kh_val" data-ref="_M/kh_val">kh_val</dfn>(h, x) ((h)-&gt;vals[x])</u></td></tr>
<tr><th id="257">257</th><td></td></tr>
<tr><th id="258">258</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="259">259</th><td><i class="doc">  <span class="command">@abstract</span>     Alias of kh_val()</i></td></tr>
<tr><th id="260">260</th><td><i class="doc"> */</i></td></tr>
<tr><th id="261">261</th><td><u>#define <dfn class="macro" id="_M/kh_value" data-ref="_M/kh_value">kh_value</dfn>(h, x) ((h)-&gt;vals[x])</u></td></tr>
<tr><th id="262">262</th><td></td></tr>
<tr><th id="263">263</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="264">264</th><td><i class="doc">  <span class="command">@abstract</span>     Get the start iterator</i></td></tr>
<tr><th id="265">265</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="266">266</th><td><i class="doc">  <span class="command">@return</span>       The start iterator [khint_t]</i></td></tr>
<tr><th id="267">267</th><td><i class="doc"> */</i></td></tr>
<tr><th id="268">268</th><td><u>#define <dfn class="macro" id="_M/kh_begin" data-ref="_M/kh_begin">kh_begin</dfn>(h) (khint_t)(0)</u></td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="271">271</th><td><i class="doc">  <span class="command">@abstract</span>     Get the end iterator</i></td></tr>
<tr><th id="272">272</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="273">273</th><td><i class="doc">  <span class="command">@return</span>       The end iterator [khint_t]</i></td></tr>
<tr><th id="274">274</th><td><i class="doc"> */</i></td></tr>
<tr><th id="275">275</th><td><u>#define <dfn class="macro" id="_M/kh_end" data-ref="_M/kh_end">kh_end</dfn>(h) ((h)-&gt;n_buckets)</u></td></tr>
<tr><th id="276">276</th><td></td></tr>
<tr><th id="277">277</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="278">278</th><td><i class="doc">  <span class="command">@abstract</span>     Get the number of elements in the hash table</i></td></tr>
<tr><th id="279">279</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="280">280</th><td><i class="doc">  <span class="command">@return</span>       Number of elements in the hash table [khint_t]</i></td></tr>
<tr><th id="281">281</th><td><i class="doc"> */</i></td></tr>
<tr><th id="282">282</th><td><u>#define <dfn class="macro" id="_M/kh_size" data-ref="_M/kh_size">kh_size</dfn>(h) ((h)-&gt;size)</u></td></tr>
<tr><th id="283">283</th><td></td></tr>
<tr><th id="284">284</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="285">285</th><td><i class="doc">  <span class="command">@abstract</span>     Get the number of buckets in the hash table</i></td></tr>
<tr><th id="286">286</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="287">287</th><td><i class="doc">  <span class="command">@return</span>       Number of buckets in the hash table [khint_t]</i></td></tr>
<tr><th id="288">288</th><td><i class="doc"> */</i></td></tr>
<tr><th id="289">289</th><td><u>#define <dfn class="macro" id="_M/kh_n_buckets" data-ref="_M/kh_n_buckets">kh_n_buckets</dfn>(h) ((h)-&gt;n_buckets)</u></td></tr>
<tr><th id="290">290</th><td></td></tr>
<tr><th id="291">291</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="292">292</th><td><i class="doc">  <span class="command">@abstract</span>     Iterate over the entries in the hash table</i></td></tr>
<tr><th id="293">293</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="294">294</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">kvar</span>  Variable to which key will be assigned</i></td></tr>
<tr><th id="295">295</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">vvar</span>  Variable to which value will be assigned</i></td></tr>
<tr><th id="296">296</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">code</span>  Block of code to execute</i></td></tr>
<tr><th id="297">297</th><td><i class="doc"> */</i></td></tr>
<tr><th id="298">298</th><td><u>#define <dfn class="macro" id="_M/kh_foreach" data-ref="_M/kh_foreach">kh_foreach</dfn>(h, kvar, vvar, code) { khint_t __i;		\</u></td></tr>
<tr><th id="299">299</th><td><u>	for (__i = kh_begin(h); __i != kh_end(h); ++__i) {		\</u></td></tr>
<tr><th id="300">300</th><td><u>		if (!kh_exist(h,__i)) continue;						\</u></td></tr>
<tr><th id="301">301</th><td><u>		(kvar) = kh_key(h,__i);								\</u></td></tr>
<tr><th id="302">302</th><td><u>		(vvar) = kh_val(h,__i);								\</u></td></tr>
<tr><th id="303">303</th><td><u>		code;												\</u></td></tr>
<tr><th id="304">304</th><td><u>	} }</u></td></tr>
<tr><th id="305">305</th><td></td></tr>
<tr><th id="306">306</th><td><i class="doc">/*! <span class="command">@function</span></i></td></tr>
<tr><th id="307">307</th><td><i class="doc">  <span class="command">@abstract</span>     Iterate over the values in the hash table</i></td></tr>
<tr><th id="308">308</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">h</span>     Pointer to the hash table [khash_t(name)*]</i></td></tr>
<tr><th id="309">309</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">vvar</span>  Variable to which value will be assigned</i></td></tr>
<tr><th id="310">310</th><td><i class="doc">  <span class="command">@param</span>  <span class="arg">code</span>  Block of code to execute</i></td></tr>
<tr><th id="311">311</th><td><i class="doc"> */</i></td></tr>
<tr><th id="312">312</th><td><u>#define <dfn class="macro" id="_M/kh_foreach_value" data-ref="_M/kh_foreach_value">kh_foreach_value</dfn>(h, vvar, code) { khint_t __i;		\</u></td></tr>
<tr><th id="313">313</th><td><u>	for (__i = kh_begin(h); __i != kh_end(h); ++__i) {		\</u></td></tr>
<tr><th id="314">314</th><td><u>		if (!kh_exist(h,__i)) continue;						\</u></td></tr>
<tr><th id="315">315</th><td><u>		(vvar) = kh_val(h,__i);								\</u></td></tr>
<tr><th id="316">316</th><td><u>		code;												\</u></td></tr>
<tr><th id="317">317</th><td><u>	} }</u></td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td><u>#define <dfn class="macro" id="_M/__kh_oid_cmp" data-ref="_M/__kh_oid_cmp">__kh_oid_cmp</dfn>(a, b) (<a class="ref" href="cache.h.html#hashcmp" title='hashcmp' data-ref="hashcmp">hashcmp</a>(a, b) == 0)</u></td></tr>
<tr><th id="320">320</th><td></td></tr>
<tr><th id="321">321</th><td><a class="macro" href="#228" title="typedef struct { khint_t n_buckets, size, n_occupied, upper_bound; khint32_t *flags; const unsigned char * *keys; void * *vals; } kh_sha1_t; static inline kh_sha1_t *kh_init_sha1(void) { return (kh_sha1_t*)xcalloc(1, sizeof(kh_sha1_t)); } static inline void kh_destroy_sha1(kh_sha1_t *h) { if (h) { free((void *)h-&gt;keys); free(h-&gt;flags); free((void *)h-&gt;vals); free(h); } } static inline void kh_clear_sha1(kh_sha1_t *h) { if (h &amp;&amp; h-&gt;flags) { memset(h-&gt;flags, 0xaa, ((h-&gt;n_buckets) &lt; 16? 1 : (h-&gt;n_buckets)&gt;&gt;4) * sizeof(khint32_t)); h-&gt;size = h-&gt;n_occupied = 0; } } static inline khint_t kh_get_sha1(const kh_sha1_t *h, const unsigned char * key) { if (h-&gt;n_buckets) { khint_t k, i, last, mask, step = 0; mask = h-&gt;n_buckets - 1; k = sha1hash(key); i = k &amp; mask; last = i; while (!((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1) || !(hashcmp(h-&gt;keys[i], key) == 0))) { i = (i + (++step)) &amp; mask; if (i == last) return h-&gt;n_buckets; } return ((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;3)? h-&gt;n_buckets : i; } else return 0; } static inline int kh_resize_sha1(kh_sha1_t *h, khint_t new_n_buckets) { khint32_t *new_flags = ((void*)0); khint_t j = 1; { (--(new_n_buckets), (new_n_buckets)|=(new_n_buckets)&gt;&gt;1, (new_n_buckets)|=(new_n_buckets)&gt;&gt;2, (new_n_buckets)|=(new_n_buckets)&gt;&gt;4, (new_n_buckets)|=(new_n_buckets)&gt;&gt;8, (new_n_buckets)|=(new_n_buckets)&gt;&gt;16, ++(new_n_buckets)); if (new_n_buckets &lt; 4) new_n_buckets = 4; if (h-&gt;size &gt;= (khint_t)(new_n_buckets * __ac_HASH_UPPER + 0.5)) j = 0; else { (new_flags) = xmalloc(st_mult(sizeof(*(new_flags)), (((new_n_buckets) &lt; 16? 1 : (new_n_buckets)&gt;&gt;4)))); if (!new_flags) return -1; memset(new_flags, 0xaa, ((new_n_buckets) &lt; 16? 1 : (new_n_buckets)&gt;&gt;4) * sizeof(khint32_t)); if (h-&gt;n_buckets &lt; new_n_buckets) { (h-&gt;keys) = xrealloc((h-&gt;keys), st_mult(sizeof(*(h-&gt;keys)), (new_n_buckets))); if (1) { (h-&gt;vals) = xrealloc((h-&gt;vals), st_mult(sizeof(*(h-&gt;vals)), (new_n_buckets))); } } } } if (j) { for (j = 0; j != h-&gt;n_buckets; ++j) { if (((h-&gt;flags[j&gt;&gt;4]&gt;&gt;((j&amp;0xfU)&lt;&lt;1))&amp;3) == 0) { const unsigned char * key = h-&gt;keys[j]; void * val; khint_t new_mask; new_mask = new_n_buckets - 1; if (1) val = h-&gt;vals[j]; (h-&gt;flags[j&gt;&gt;4]|=1ul&lt;&lt;((j&amp;0xfU)&lt;&lt;1)); while (1) { khint_t k, i, step = 0; k = sha1hash(key); i = k &amp; new_mask; while (!((new_flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2)) i = (i + (++step)) &amp; new_mask; (new_flags[i&gt;&gt;4]&amp;=~(2ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1))); if (i &lt; h-&gt;n_buckets &amp;&amp; ((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;3) == 0) { { const unsigned char * tmp = h-&gt;keys[i]; h-&gt;keys[i] = key; key = tmp; } if (1) { void * tmp = h-&gt;vals[i]; h-&gt;vals[i] = val; val = tmp; } (h-&gt;flags[i&gt;&gt;4]|=1ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1)); } else { h-&gt;keys[i] = key; if (1) h-&gt;vals[i] = val; break; } } } } if (h-&gt;n_buckets &gt; new_n_buckets) { (h-&gt;keys) = xrealloc((h-&gt;keys), st_mult(sizeof(*(h-&gt;keys)), (new_n_buckets))); if (1) (h-&gt;vals) = xrealloc((h-&gt;vals), st_mult(sizeof(*(h-&gt;vals)), (new_n_buckets))); } free(h-&gt;flags); h-&gt;flags = new_flags; h-&gt;n_buckets = new_n_buckets; h-&gt;n_occupied = h-&gt;size; h-&gt;upper_bound = (khint_t)(h-&gt;n_buckets * __ac_HASH_UPPER + 0.5); } return 0; } static inline khint_t kh_put_sha1(kh_sha1_t *h, const unsigned char * key, int *ret) { khint_t x; if (h-&gt;n_occupied &gt;= h-&gt;upper_bound) { if (h-&gt;n_buckets &gt; (h-&gt;size&lt;&lt;1)) { if (kh_resize_sha1(h, h-&gt;n_buckets - 1) &lt; 0) { *ret = -1; return h-&gt;n_buckets; } } else if (kh_resize_sha1(h, h-&gt;n_buckets + 1) &lt; 0) { *ret = -1; return h-&gt;n_buckets; } } { khint_t k, i, site, last, mask = h-&gt;n_buckets - 1, step = 0; x = site = h-&gt;n_buckets; k = sha1hash(key); i = k &amp; mask; if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2)) x = i; else { last = i; while (!((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1) || !(hashcmp(h-&gt;keys[i], key) == 0))) { if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1)) site = i; i = (i + (++step)) &amp; mask; if (i == last) { x = site; break; } } if (x == h-&gt;n_buckets) { if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; site != h-&gt;n_buckets) x = site; else x = i; } } } if (((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;2)) { h-&gt;keys[x] = key; (h-&gt;flags[x&gt;&gt;4]&amp;=~(3ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1))); ++h-&gt;size; ++h-&gt;n_occupied; *ret = 1; } else if (((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;1)) { h-&gt;keys[x] = key; (h-&gt;flags[x&gt;&gt;4]&amp;=~(3ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1))); ++h-&gt;size; *ret = 2; } else *ret = 0; return x; } static inline void kh_del_sha1(kh_sha1_t *h, khint_t x) { if (x != h-&gt;n_buckets &amp;&amp; !((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;3)) { (h-&gt;flags[x&gt;&gt;4]|=1ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1)); --h-&gt;size; } }" data-ref="_M/KHASH_INIT">KHASH_INIT</a>(sha1, <em>const</em> <em>unsigned</em> <em>char</em> *, <em>void</em> *, <var>1</var>, <a class="ref" href="hashmap.h.html#sha1hash" title='sha1hash' data-ref="sha1hash">sha1hash</a>, __kh_oid_cmp)</td></tr>
<tr><th id="322">322</th><td><b>typedef</b> <a class="typedef" href="#321" title='kh_sha1_t' data-type='struct kh_sha1_t' data-ref="kh_sha1_t">kh_sha1_t</a> <dfn class="typedef" id="khash_sha1" title='khash_sha1' data-type='kh_sha1_t' data-ref="khash_sha1">khash_sha1</dfn>;</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td><a class="macro" href="#228" title="typedef struct { khint_t n_buckets, size, n_occupied, upper_bound; khint32_t *flags; const unsigned char * *keys; int *vals; } kh_sha1_pos_t; static inline kh_sha1_pos_t *kh_init_sha1_pos(void) { return (kh_sha1_pos_t*)xcalloc(1, sizeof(kh_sha1_pos_t)); } static inline void kh_destroy_sha1_pos(kh_sha1_pos_t *h) { if (h) { free((void *)h-&gt;keys); free(h-&gt;flags); free((void *)h-&gt;vals); free(h); } } static inline void kh_clear_sha1_pos(kh_sha1_pos_t *h) { if (h &amp;&amp; h-&gt;flags) { memset(h-&gt;flags, 0xaa, ((h-&gt;n_buckets) &lt; 16? 1 : (h-&gt;n_buckets)&gt;&gt;4) * sizeof(khint32_t)); h-&gt;size = h-&gt;n_occupied = 0; } } static inline khint_t kh_get_sha1_pos(const kh_sha1_pos_t *h, const unsigned char * key) { if (h-&gt;n_buckets) { khint_t k, i, last, mask, step = 0; mask = h-&gt;n_buckets - 1; k = sha1hash(key); i = k &amp; mask; last = i; while (!((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1) || !(hashcmp(h-&gt;keys[i], key) == 0))) { i = (i + (++step)) &amp; mask; if (i == last) return h-&gt;n_buckets; } return ((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;3)? h-&gt;n_buckets : i; } else return 0; } static inline int kh_resize_sha1_pos(kh_sha1_pos_t *h, khint_t new_n_buckets) { khint32_t *new_flags = ((void*)0); khint_t j = 1; { (--(new_n_buckets), (new_n_buckets)|=(new_n_buckets)&gt;&gt;1, (new_n_buckets)|=(new_n_buckets)&gt;&gt;2, (new_n_buckets)|=(new_n_buckets)&gt;&gt;4, (new_n_buckets)|=(new_n_buckets)&gt;&gt;8, (new_n_buckets)|=(new_n_buckets)&gt;&gt;16, ++(new_n_buckets)); if (new_n_buckets &lt; 4) new_n_buckets = 4; if (h-&gt;size &gt;= (khint_t)(new_n_buckets * __ac_HASH_UPPER + 0.5)) j = 0; else { (new_flags) = xmalloc(st_mult(sizeof(*(new_flags)), (((new_n_buckets) &lt; 16? 1 : (new_n_buckets)&gt;&gt;4)))); if (!new_flags) return -1; memset(new_flags, 0xaa, ((new_n_buckets) &lt; 16? 1 : (new_n_buckets)&gt;&gt;4) * sizeof(khint32_t)); if (h-&gt;n_buckets &lt; new_n_buckets) { (h-&gt;keys) = xrealloc((h-&gt;keys), st_mult(sizeof(*(h-&gt;keys)), (new_n_buckets))); if (1) { (h-&gt;vals) = xrealloc((h-&gt;vals), st_mult(sizeof(*(h-&gt;vals)), (new_n_buckets))); } } } } if (j) { for (j = 0; j != h-&gt;n_buckets; ++j) { if (((h-&gt;flags[j&gt;&gt;4]&gt;&gt;((j&amp;0xfU)&lt;&lt;1))&amp;3) == 0) { const unsigned char * key = h-&gt;keys[j]; int val; khint_t new_mask; new_mask = new_n_buckets - 1; if (1) val = h-&gt;vals[j]; (h-&gt;flags[j&gt;&gt;4]|=1ul&lt;&lt;((j&amp;0xfU)&lt;&lt;1)); while (1) { khint_t k, i, step = 0; k = sha1hash(key); i = k &amp; new_mask; while (!((new_flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2)) i = (i + (++step)) &amp; new_mask; (new_flags[i&gt;&gt;4]&amp;=~(2ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1))); if (i &lt; h-&gt;n_buckets &amp;&amp; ((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;3) == 0) { { const unsigned char * tmp = h-&gt;keys[i]; h-&gt;keys[i] = key; key = tmp; } if (1) { int tmp = h-&gt;vals[i]; h-&gt;vals[i] = val; val = tmp; } (h-&gt;flags[i&gt;&gt;4]|=1ul&lt;&lt;((i&amp;0xfU)&lt;&lt;1)); } else { h-&gt;keys[i] = key; if (1) h-&gt;vals[i] = val; break; } } } } if (h-&gt;n_buckets &gt; new_n_buckets) { (h-&gt;keys) = xrealloc((h-&gt;keys), st_mult(sizeof(*(h-&gt;keys)), (new_n_buckets))); if (1) (h-&gt;vals) = xrealloc((h-&gt;vals), st_mult(sizeof(*(h-&gt;vals)), (new_n_buckets))); } free(h-&gt;flags); h-&gt;flags = new_flags; h-&gt;n_buckets = new_n_buckets; h-&gt;n_occupied = h-&gt;size; h-&gt;upper_bound = (khint_t)(h-&gt;n_buckets * __ac_HASH_UPPER + 0.5); } return 0; } static inline khint_t kh_put_sha1_pos(kh_sha1_pos_t *h, const unsigned char * key, int *ret) { khint_t x; if (h-&gt;n_occupied &gt;= h-&gt;upper_bound) { if (h-&gt;n_buckets &gt; (h-&gt;size&lt;&lt;1)) { if (kh_resize_sha1_pos(h, h-&gt;n_buckets - 1) &lt; 0) { *ret = -1; return h-&gt;n_buckets; } } else if (kh_resize_sha1_pos(h, h-&gt;n_buckets + 1) &lt; 0) { *ret = -1; return h-&gt;n_buckets; } } { khint_t k, i, site, last, mask = h-&gt;n_buckets - 1, step = 0; x = site = h-&gt;n_buckets; k = sha1hash(key); i = k &amp; mask; if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2)) x = i; else { last = i; while (!((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1) || !(hashcmp(h-&gt;keys[i], key) == 0))) { if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;1)) site = i; i = (i + (++step)) &amp; mask; if (i == last) { x = site; break; } } if (x == h-&gt;n_buckets) { if (((h-&gt;flags[i&gt;&gt;4]&gt;&gt;((i&amp;0xfU)&lt;&lt;1))&amp;2) &amp;&amp; site != h-&gt;n_buckets) x = site; else x = i; } } } if (((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;2)) { h-&gt;keys[x] = key; (h-&gt;flags[x&gt;&gt;4]&amp;=~(3ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1))); ++h-&gt;size; ++h-&gt;n_occupied; *ret = 1; } else if (((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;1)) { h-&gt;keys[x] = key; (h-&gt;flags[x&gt;&gt;4]&amp;=~(3ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1))); ++h-&gt;size; *ret = 2; } else *ret = 0; return x; } static inline void kh_del_sha1_pos(kh_sha1_pos_t *h, khint_t x) { if (x != h-&gt;n_buckets &amp;&amp; !((h-&gt;flags[x&gt;&gt;4]&gt;&gt;((x&amp;0xfU)&lt;&lt;1))&amp;3)) { (h-&gt;flags[x&gt;&gt;4]|=1ul&lt;&lt;((x&amp;0xfU)&lt;&lt;1)); --h-&gt;size; } }" data-ref="_M/KHASH_INIT">KHASH_INIT</a>(sha1_pos, <em>const</em> <em>unsigned</em> <em>char</em> *, <em>int</em>, <var>1</var>, <a class="ref" href="hashmap.h.html#sha1hash" title='sha1hash' data-ref="sha1hash">sha1hash</a>, __kh_oid_cmp)</td></tr>
<tr><th id="325">325</th><td><b>typedef</b> <a class="typedef" href="#324" title='kh_sha1_pos_t' data-type='struct kh_sha1_pos_t' data-ref="kh_sha1_pos_t">kh_sha1_pos_t</a> <dfn class="typedef" id="khash_sha1_pos" title='khash_sha1_pos' data-type='kh_sha1_pos_t' data-ref="khash_sha1_pos">khash_sha1_pos</dfn>;</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td><u>#<span data-ppcond="26">endif</span> /* __AC_KHASH_H */</u></td></tr>
<tr><th id="328">328</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='builtin/pack-objects.c.html'>codebrowser/builtin/pack-objects.c</a><br/>Generated on <em>2017-Aug-29</em> from project codebrowser revision <em>v2.14.1-326-g3dc57eb</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
