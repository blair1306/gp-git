<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>merge-file.c source code [codebrowser/builtin/merge-file.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/builtin/merge-file.c'; var root_path = '../..'; var data_path = '../../../data';</script>
<script src='../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='..'>codebrowser</a>/<a href='./'>builtin</a>/<a href='merge-file.c.html'>merge-file.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><u>#include <a href="../builtin.h.html">"builtin.h"</a></u></td></tr>
<tr><th id="2">2</th><td><u>#include <a href="../cache.h.html">"cache.h"</a></u></td></tr>
<tr><th id="3">3</th><td><u>#include <a href="../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="4">4</th><td><u>#include <a href="../xdiff/xdiff.h.html">"xdiff/xdiff.h"</a></u></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="../xdiff-interface.h.html">"xdiff-interface.h"</a></u></td></tr>
<tr><th id="6">6</th><td><u>#include <a href="../parse-options.h.html">"parse-options.h"</a></u></td></tr>
<tr><th id="7">7</th><td></td></tr>
<tr><th id="8">8</th><td><em>static</em> <em>const</em> <em>char</em> *<em>const</em> <dfn class="tu decl def" id="merge_file_usage" title='merge_file_usage' data-type='const char *const [2]' data-ref="merge_file_usage">merge_file_usage</dfn>[] = {</td></tr>
<tr><th id="9">9</th><td>	<a class="macro" href="../gettext.h.html#89" title="(&quot;git merge-file [&lt;options&gt;] [-L &lt;name1&gt; [-L &lt;orig&gt; [-L &lt;name2&gt;]]] &lt;file1&gt; &lt;orig-file&gt; &lt;file2&gt;&quot;)" data-ref="_M/N_">N_</a>(<q>"git merge-file [&lt;options&gt;] [-L &lt;name1&gt; [-L &lt;orig&gt; [-L &lt;name2&gt;]]] &lt;file1&gt; &lt;orig-file&gt; &lt;file2&gt;"</q>),</td></tr>
<tr><th id="10">10</th><td>	<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="11">11</th><td>};</td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="label_cb" title='label_cb' data-type='int label_cb(const struct option * opt, const char * arg, int unset)' data-ref="label_cb">label_cb</dfn>(<em>const</em> <b>struct</b> <a class="type" href="../parse-options.h.html#option" title='option' data-ref="option">option</a> *<dfn class="local col1 decl" id="1opt" title='opt' data-type='const struct option *' data-ref="1opt">opt</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="2arg" title='arg' data-type='const char *' data-ref="2arg">arg</dfn>, <em>int</em> <dfn class="local col3 decl" id="3unset" title='unset' data-type='int' data-ref="3unset">unset</dfn>)</td></tr>
<tr><th id="14">14</th><td>{</td></tr>
<tr><th id="15">15</th><td>	<em>static</em> <em>int</em> <dfn class="local col4 decl" id="4label_count" title='label_count' data-type='int' data-ref="4label_count">label_count</dfn> = <var>0</var>;</td></tr>
<tr><th id="16">16</th><td>	<em>const</em> <em>char</em> **<dfn class="local col5 decl" id="5names" title='names' data-type='const char **' data-ref="5names">names</dfn> = (<em>const</em> <em>char</em> **)<a class="local col1 ref" href="#1opt" title='opt' data-ref="1opt">opt</a>-&gt;<a class="ref" href="../parse-options.h.html#option::value" title='option::value' data-ref="option::value">value</a>;</td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td>	<b>if</b> (<a class="local col4 ref" href="#4label_count" title='label_count' data-ref="4label_count">label_count</a> &gt;= <var>3</var>)</td></tr>
<tr><th id="19">19</th><td>		<b>return</b> <a class="macro" href="../git-compat-util.h.html#446" title="(error(&quot;too many labels on the command line&quot;), const_error())" data-ref="_M/error">error</a>(<q>"too many labels on the command line"</q>);</td></tr>
<tr><th id="20">20</th><td>	<a class="local col5 ref" href="#5names" title='names' data-ref="5names">names</a>[<a class="local col4 ref" href="#4label_count" title='label_count' data-ref="4label_count">label_count</a>++] = <a class="local col2 ref" href="#2arg" title='arg' data-ref="2arg">arg</a>;</td></tr>
<tr><th id="21">21</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="22">22</th><td>}</td></tr>
<tr><th id="23">23</th><td></td></tr>
<tr><th id="24">24</th><td><em>int</em> <dfn class="decl def" id="cmd_merge_file" title='cmd_merge_file' data-ref="cmd_merge_file">cmd_merge_file</dfn>(<em>int</em> <dfn class="local col6 decl" id="6argc" title='argc' data-type='int' data-ref="6argc">argc</dfn>, <em>const</em> <em>char</em> **<dfn class="local col7 decl" id="7argv" title='argv' data-type='const char **' data-ref="7argv">argv</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="8prefix" title='prefix' data-type='const char *' data-ref="8prefix">prefix</dfn>)</td></tr>
<tr><th id="25">25</th><td>{</td></tr>
<tr><th id="26">26</th><td>	<em>const</em> <em>char</em> *<dfn class="local col9 decl" id="9names" title='names' data-type='const char *[3]' data-ref="9names">names</dfn>[<var>3</var>] = { <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> };</td></tr>
<tr><th id="27">27</th><td>	<a class="typedef" href="../xdiff/xdiff.h.html#mmfile_t" title='mmfile_t' data-type='struct s_mmfile' data-ref="mmfile_t">mmfile_t</a> <dfn class="local col0 decl" id="10mmfs" title='mmfs' data-type='mmfile_t [3]' data-ref="10mmfs">mmfs</dfn>[<var>3</var>];</td></tr>
<tr><th id="28">28</th><td>	<a class="typedef" href="../xdiff/xdiff.h.html#mmbuffer_t" title='mmbuffer_t' data-type='struct s_mmbuffer' data-ref="mmbuffer_t">mmbuffer_t</a> <dfn class="local col1 decl" id="11result" title='result' data-type='mmbuffer_t' data-ref="11result">result</dfn> = {<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <var>0</var>};</td></tr>
<tr><th id="29">29</th><td>	<a class="typedef" href="../xdiff/xdiff.h.html#xmparam_t" title='xmparam_t' data-type='struct s_xmparam' data-ref="xmparam_t">xmparam_t</a> <dfn class="local col2 decl" id="12xmp" title='xmp' data-type='xmparam_t' data-ref="12xmp">xmp</dfn> = {{<var>0</var>}};</td></tr>
<tr><th id="30">30</th><td>	<em>int</em> <dfn class="local col3 decl" id="13ret" title='ret' data-type='int' data-ref="13ret">ret</dfn> = <var>0</var>, <dfn class="local col4 decl" id="14i" title='i' data-type='int' data-ref="14i">i</dfn> = <var>0</var>, <dfn class="local col5 decl" id="15to_stdout" title='to_stdout' data-type='int' data-ref="15to_stdout">to_stdout</dfn> = <var>0</var>;</td></tr>
<tr><th id="31">31</th><td>	<em>int</em> <dfn class="local col6 decl" id="16quiet" title='quiet' data-type='int' data-ref="16quiet">quiet</dfn> = <var>0</var>;</td></tr>
<tr><th id="32">32</th><td>	<b>struct</b> <a class="type" href="../parse-options.h.html#option" title='option' data-ref="option">option</a> <dfn class="local col7 decl" id="17options" title='options' data-type='struct option [9]' data-ref="17options">options</dfn>[] = {</td></tr>
<tr><th id="33">33</th><td>		<a class="macro" href="../parse-options.h.html#127" title="{ OPTION_SET_INT, (&apos;p&apos;), (&quot;stdout&quot;), (&amp;to_stdout), ((void*)0), ((&quot;send results to standard output&quot;)), PARSE_OPT_NOARG, ((void*)0), (1) }" data-ref="_M/OPT_BOOL">OPT_BOOL</a>(<kbd>'p'</kbd>, <q>"stdout"</q>, &amp;<a class="local col5 ref" href="#15to_stdout" title='to_stdout' data-ref="15to_stdout">to_stdout</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;send results to standard output&quot;)" data-ref="_M/N_">N_</a>(<q>"send results to standard output"</q>)),</td></tr>
<tr><th id="34">34</th><td>		<a class="macro" href="../parse-options.h.html#125" title="{ OPTION_SET_INT, (0), (&quot;diff3&quot;), (&amp;xmp.style), ((void*)0), ((&quot;use a diff3 based merge&quot;)), PARSE_OPT_NOARG, ((void*)0), (1) }" data-ref="_M/OPT_SET_INT">OPT_SET_INT</a>(<var>0</var>, <q>"diff3"</q>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::style" title='s_xmparam::style' data-ref="s_xmparam::style">style</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;use a diff3 based merge&quot;)" data-ref="_M/N_">N_</a>(<q>"use a diff3 based merge"</q>), <a class="macro" href="../xdiff/xdiff.h.html#69" title="1" data-ref="_M/XDL_MERGE_DIFF3">XDL_MERGE_DIFF3</a>),</td></tr>
<tr><th id="35">35</th><td>		<a class="macro" href="../parse-options.h.html#125" title="{ OPTION_SET_INT, (0), (&quot;ours&quot;), (&amp;xmp.favor), ((void*)0), ((&quot;for conflicts, use our version&quot;)), PARSE_OPT_NOARG, ((void*)0), (1) }" data-ref="_M/OPT_SET_INT">OPT_SET_INT</a>(<var>0</var>, <q>"ours"</q>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::favor" title='s_xmparam::favor' data-ref="s_xmparam::favor">favor</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;for conflicts, use our version&quot;)" data-ref="_M/N_">N_</a>(<q>"for conflicts, use our version"</q>),</td></tr>
<tr><th id="36">36</th><td>			    <a class="macro" href="../xdiff/xdiff.h.html#64" title="1" data-ref="_M/XDL_MERGE_FAVOR_OURS">XDL_MERGE_FAVOR_OURS</a>),</td></tr>
<tr><th id="37">37</th><td>		<a class="macro" href="../parse-options.h.html#125" title="{ OPTION_SET_INT, (0), (&quot;theirs&quot;), (&amp;xmp.favor), ((void*)0), ((&quot;for conflicts, use their version&quot;)), PARSE_OPT_NOARG, ((void*)0), (2) }" data-ref="_M/OPT_SET_INT">OPT_SET_INT</a>(<var>0</var>, <q>"theirs"</q>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::favor" title='s_xmparam::favor' data-ref="s_xmparam::favor">favor</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;for conflicts, use their version&quot;)" data-ref="_M/N_">N_</a>(<q>"for conflicts, use their version"</q>),</td></tr>
<tr><th id="38">38</th><td>			    <a class="macro" href="../xdiff/xdiff.h.html#65" title="2" data-ref="_M/XDL_MERGE_FAVOR_THEIRS">XDL_MERGE_FAVOR_THEIRS</a>),</td></tr>
<tr><th id="39">39</th><td>		<a class="macro" href="../parse-options.h.html#125" title="{ OPTION_SET_INT, (0), (&quot;union&quot;), (&amp;xmp.favor), ((void*)0), ((&quot;for conflicts, use a union version&quot;)), PARSE_OPT_NOARG, ((void*)0), (3) }" data-ref="_M/OPT_SET_INT">OPT_SET_INT</a>(<var>0</var>, <q>"union"</q>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::favor" title='s_xmparam::favor' data-ref="s_xmparam::favor">favor</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;for conflicts, use a union version&quot;)" data-ref="_M/N_">N_</a>(<q>"for conflicts, use a union version"</q>),</td></tr>
<tr><th id="40">40</th><td>			    <a class="macro" href="../xdiff/xdiff.h.html#66" title="3" data-ref="_M/XDL_MERGE_FAVOR_UNION">XDL_MERGE_FAVOR_UNION</a>),</td></tr>
<tr><th id="41">41</th><td>		<a class="macro" href="../parse-options.h.html#132" title="{ OPTION_INTEGER, (0), (&quot;marker-size&quot;), (&amp;xmp.marker_size), (&quot;n&quot;), ((&quot;for conflicts, use this marker size&quot;)) }" data-ref="_M/OPT_INTEGER">OPT_INTEGER</a>(<var>0</var>, <q>"marker-size"</q>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::marker_size" title='s_xmparam::marker_size' data-ref="s_xmparam::marker_size">marker_size</a>,</td></tr>
<tr><th id="42">42</th><td>			    <a class="macro" href="../gettext.h.html#89" title="(&quot;for conflicts, use this marker size&quot;)" data-ref="_M/N_">N_</a>(<q>"for conflicts, use this marker size"</q>)),</td></tr>
<tr><th id="43">43</th><td>		<a class="macro" href="../parse-options.h.html#236" title="{ OPTION_COUNTUP, (&apos;q&apos;), (&quot;quiet&quot;), ((&amp;quiet)), ((void*)0), (((&quot;do not warn about conflicts&quot;))), PARSE_OPT_NOARG }" data-ref="_M/OPT__QUIET">OPT__QUIET</a>(&amp;<a class="local col6 ref" href="#16quiet" title='quiet' data-ref="16quiet">quiet</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;do not warn about conflicts&quot;)" data-ref="_M/N_">N_</a>(<q>"do not warn about conflicts"</q>)),</td></tr>
<tr><th id="44">44</th><td>		<a class="macro" href="../parse-options.h.html#147" title="{ OPTION_CALLBACK, (&apos;L&apos;), (((void*)0)), (names), ((&quot;name&quot;)), ((&quot;set labels for file1/orig-file/file2&quot;)), 0, (&amp;label_cb) }" data-ref="_M/OPT_CALLBACK">OPT_CALLBACK</a>(<kbd>'L'</kbd>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>, <a class="macro" href="../gettext.h.html#89" title="(&quot;name&quot;)" data-ref="_M/N_">N_</a>(<q>"name"</q>),</td></tr>
<tr><th id="45">45</th><td>			     <a class="macro" href="../gettext.h.html#89" title="(&quot;set labels for file1/orig-file/file2&quot;)" data-ref="_M/N_">N_</a>(<q>"set labels for file1/orig-file/file2"</q>), &amp;<a class="tu ref" href="#label_cb" title='label_cb' data-use='a' data-ref="label_cb">label_cb</a>),</td></tr>
<tr><th id="46">46</th><td>		<a class="macro" href="../parse-options.h.html#115" title="{ OPTION_END }" data-ref="_M/OPT_END">OPT_END</a>(),</td></tr>
<tr><th id="47">47</th><td>	};</td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::level" title='s_xmparam::level' data-ref="s_xmparam::level">level</a> = <a class="macro" href="../xdiff/xdiff.h.html#61" title="3" data-ref="_M/XDL_MERGE_ZEALOUS_ALNUM">XDL_MERGE_ZEALOUS_ALNUM</a>;</td></tr>
<tr><th id="50">50</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::style" title='s_xmparam::style' data-ref="s_xmparam::style">style</a> = <var>0</var>;</td></tr>
<tr><th id="51">51</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::favor" title='s_xmparam::favor' data-ref="s_xmparam::favor">favor</a> = <var>0</var>;</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td>	<b>if</b> (<a class="ref" href="../cache.h.html#startup_info" title='startup_info' data-ref="startup_info">startup_info</a>-&gt;<a class="ref" href="../cache.h.html#startup_info::have_repository" title='startup_info::have_repository' data-ref="startup_info::have_repository">have_repository</a>) {</td></tr>
<tr><th id="54">54</th><td>		<i>/* Read the configuration file */</i></td></tr>
<tr><th id="55">55</th><td>		<a class="ref" href="../config.h.html#git_config" title='git_config' data-ref="git_config">git_config</a>(<a class="ref" href="../xdiff-interface.h.html#git_xmerge_config" title='git_xmerge_config' data-ref="git_xmerge_config">git_xmerge_config</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="56">56</th><td>		<b>if</b> (<var>0</var> &lt;= <a class="ref" href="../xdiff-interface.h.html#git_xmerge_style" title='git_xmerge_style' data-ref="git_xmerge_style">git_xmerge_style</a>)</td></tr>
<tr><th id="57">57</th><td>			<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::style" title='s_xmparam::style' data-ref="s_xmparam::style">style</a> = <a class="ref" href="../xdiff-interface.h.html#git_xmerge_style" title='git_xmerge_style' data-ref="git_xmerge_style">git_xmerge_style</a>;</td></tr>
<tr><th id="58">58</th><td>	}</td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td>	<a class="local col6 ref" href="#6argc" title='argc' data-ref="6argc">argc</a> = <a class="ref" href="../parse-options.h.html#parse_options" title='parse_options' data-ref="parse_options">parse_options</a>(<a class="local col6 ref" href="#6argc" title='argc' data-ref="6argc">argc</a>, <a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>, <a class="local col8 ref" href="#8prefix" title='prefix' data-ref="8prefix">prefix</a>, <a class="local col7 ref" href="#17options" title='options' data-ref="17options">options</a>, <a class="tu ref" href="#merge_file_usage" title='merge_file_usage' data-use='r' data-ref="merge_file_usage">merge_file_usage</a>, <var>0</var>);</td></tr>
<tr><th id="61">61</th><td>	<b>if</b> (<a class="local col6 ref" href="#6argc" title='argc' data-ref="6argc">argc</a> != <var>3</var>)</td></tr>
<tr><th id="62">62</th><td>		<a class="ref" href="../parse-options.h.html#usage_with_options" title='usage_with_options' data-ref="usage_with_options">usage_with_options</a>(<a class="tu ref" href="#merge_file_usage" title='merge_file_usage' data-use='r' data-ref="merge_file_usage">merge_file_usage</a>, <a class="local col7 ref" href="#17options" title='options' data-ref="17options">options</a>);</td></tr>
<tr><th id="63">63</th><td>	<b>if</b> (<a class="local col6 ref" href="#16quiet" title='quiet' data-ref="16quiet">quiet</a>) {</td></tr>
<tr><th id="64">64</th><td>		<b>if</b> (!<a class="ref" href="../../include/stdio.h.html#286" title='freopen' data-ref="freopen64">freopen</a>(<q>"/dev/null"</q>, <q>"w"</q>, <a class="macro" href="../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>))</td></tr>
<tr><th id="65">65</th><td>			<b>return</b> <a class="macro" href="../git-compat-util.h.html#447" title="(error_errno(&quot;failed to redirect stderr to /dev/null&quot;), const_error())" data-ref="_M/error_errno">error_errno</a>(<q>"failed to redirect stderr to /dev/null"</q>);</td></tr>
<tr><th id="66">66</th><td>	}</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>	<b>for</b> (<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a> = <var>0</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a> &lt; <var>3</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>++) {</td></tr>
<tr><th id="69">69</th><td>		<em>char</em> *<dfn class="local col8 decl" id="18fname" title='fname' data-type='char *' data-ref="18fname">fname</dfn>;</td></tr>
<tr><th id="70">70</th><td>		<em>int</em> <dfn class="local col9 decl" id="19ret" title='ret' data-type='int' data-ref="19ret">ret</dfn>;</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td>		<b>if</b> (!<a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>])</td></tr>
<tr><th id="73">73</th><td>			<a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>] = <a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>];</td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td>		<a class="local col8 ref" href="#18fname" title='fname' data-ref="18fname">fname</a> = <a class="ref" href="../cache.h.html#prefix_filename" title='prefix_filename' data-ref="prefix_filename">prefix_filename</a>(<a class="local col8 ref" href="#8prefix" title='prefix' data-ref="8prefix">prefix</a>, <a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>]);</td></tr>
<tr><th id="76">76</th><td>		<a class="local col9 ref" href="#19ret" title='ret' data-ref="19ret">ret</a> = <a class="ref" href="../xdiff-interface.h.html#read_mmfile" title='read_mmfile' data-ref="read_mmfile">read_mmfile</a>(<a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a> + <a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>, <a class="local col8 ref" href="#18fname" title='fname' data-ref="18fname">fname</a>);</td></tr>
<tr><th id="77">77</th><td>		<a class="ref" href="../../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col8 ref" href="#18fname" title='fname' data-ref="18fname">fname</a>);</td></tr>
<tr><th id="78">78</th><td>		<b>if</b> (<a class="local col9 ref" href="#19ret" title='ret' data-ref="19ret">ret</a>)</td></tr>
<tr><th id="79">79</th><td>			<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td>		<b>if</b> (<a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>].<a class="ref" href="../xdiff/xdiff.h.html#s_mmfile::size" title='s_mmfile::size' data-ref="s_mmfile::size">size</a> &gt; <a class="macro" href="../xdiff-interface.h.html#12" title="(1024UL * 1024 * 1023)" data-ref="_M/MAX_XDIFF_SIZE">MAX_XDIFF_SIZE</a> ||</td></tr>
<tr><th id="82">82</th><td>		    <a class="ref" href="../xdiff-interface.h.html#buffer_is_binary" title='buffer_is_binary' data-ref="buffer_is_binary">buffer_is_binary</a>(<a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>].<a class="ref" href="../xdiff/xdiff.h.html#s_mmfile::ptr" title='s_mmfile::ptr' data-ref="s_mmfile::ptr">ptr</a>, <a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>].<a class="ref" href="../xdiff/xdiff.h.html#s_mmfile::size" title='s_mmfile::size' data-ref="s_mmfile::size">size</a>))</td></tr>
<tr><th id="83">83</th><td>			<b>return</b> <a class="macro" href="../git-compat-util.h.html#446" title="(error(&quot;Cannot merge binary files: %s&quot;, argv[i]), const_error())" data-ref="_M/error">error</a>(<q>"Cannot merge binary files: %s"</q>,</td></tr>
<tr><th id="84">84</th><td>					<a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>]);</td></tr>
<tr><th id="85">85</th><td>	}</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::ancestor" title='s_xmparam::ancestor' data-ref="s_xmparam::ancestor">ancestor</a> = <a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>[<var>1</var>];</td></tr>
<tr><th id="88">88</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::file1" title='s_xmparam::file1' data-ref="s_xmparam::file1">file1</a> = <a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>[<var>0</var>];</td></tr>
<tr><th id="89">89</th><td>	<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_xmparam::file2" title='s_xmparam::file2' data-ref="s_xmparam::file2">file2</a> = <a class="local col9 ref" href="#9names" title='names' data-ref="9names">names</a>[<var>2</var>];</td></tr>
<tr><th id="90">90</th><td>	<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> = <a class="ref" href="../xdiff/xdiff.h.html#xdl_merge" title='xdl_merge' data-ref="xdl_merge">xdl_merge</a>(<a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a> + <var>1</var>, <a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a> + <var>0</var>, <a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a> + <var>2</var>, &amp;<a class="local col2 ref" href="#12xmp" title='xmp' data-ref="12xmp">xmp</a>, &amp;<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>);</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>	<b>for</b> (<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a> = <var>0</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a> &lt; <var>3</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>++)</td></tr>
<tr><th id="93">93</th><td>		<a class="ref" href="../../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col0 ref" href="#10mmfs" title='mmfs' data-ref="10mmfs">mmfs</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i">i</a>].<a class="ref" href="../xdiff/xdiff.h.html#s_mmfile::ptr" title='s_mmfile::ptr' data-ref="s_mmfile::ptr">ptr</a>);</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>	<b>if</b> (<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> &gt;= <var>0</var>) {</td></tr>
<tr><th id="96">96</th><td>		<em>const</em> <em>char</em> *<dfn class="local col0 decl" id="20filename" title='filename' data-type='const char *' data-ref="20filename">filename</dfn> = <a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>[<var>0</var>];</td></tr>
<tr><th id="97">97</th><td>		<em>char</em> *<dfn class="local col1 decl" id="21fpath" title='fpath' data-type='char *' data-ref="21fpath">fpath</dfn> = <a class="ref" href="../cache.h.html#prefix_filename" title='prefix_filename' data-ref="prefix_filename">prefix_filename</a>(<a class="local col8 ref" href="#8prefix" title='prefix' data-ref="8prefix">prefix</a>, <a class="local col7 ref" href="#7argv" title='argv' data-ref="7argv">argv</a>[<var>0</var>]);</td></tr>
<tr><th id="98">98</th><td>		<a class="typedef" href="../../include/stdio.h.html#FILE" title='FILE' data-type='struct _IO_FILE' data-ref="FILE">FILE</a> *<dfn class="local col2 decl" id="22f" title='f' data-type='FILE *' data-ref="22f">f</dfn> = <a class="local col5 ref" href="#15to_stdout" title='to_stdout' data-ref="15to_stdout">to_stdout</a> ? <a class="macro" href="../../include/stdio.h.html#173" title="stdout" data-ref="_M/stdout">stdout</a> : <a class="macro" href="../git-compat-util.h.html#703" title="git_fopen(fpath,&quot;wb&quot;)" data-ref="_M/fopen">fopen</a>(<a class="local col1 ref" href="#21fpath" title='fpath' data-ref="21fpath">fpath</a>, <q>"wb"</q>);</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>		<b>if</b> (!<a class="local col2 ref" href="#22f" title='f' data-ref="22f">f</a>)</td></tr>
<tr><th id="101">101</th><td>			<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> = <a class="macro" href="../git-compat-util.h.html#447" title="(error_errno(&quot;Could not open %s for writing&quot;, filename), const_error())" data-ref="_M/error_errno">error_errno</a>(<q>"Could not open %s for writing"</q>,</td></tr>
<tr><th id="102">102</th><td>					  <a class="local col0 ref" href="#20filename" title='filename' data-ref="20filename">filename</a>);</td></tr>
<tr><th id="103">103</th><td>		<b>else</b> <b>if</b> (<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_mmbuffer::size" title='s_mmbuffer::size' data-ref="s_mmbuffer::size">size</a> &amp;&amp;</td></tr>
<tr><th id="104">104</th><td>			 <a class="ref" href="../../include/stdio.h.html#fwrite" title='fwrite' data-ref="fwrite">fwrite</a>(<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_mmbuffer::ptr" title='s_mmbuffer::ptr' data-ref="s_mmbuffer::ptr">ptr</a>, <a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_mmbuffer::size" title='s_mmbuffer::size' data-ref="s_mmbuffer::size">size</a>, <var>1</var>, <a class="local col2 ref" href="#22f" title='f' data-ref="22f">f</a>) != <var>1</var>)</td></tr>
<tr><th id="105">105</th><td>			<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> = <a class="macro" href="../git-compat-util.h.html#447" title="(error_errno(&quot;Could not write to %s&quot;, filename), const_error())" data-ref="_M/error_errno">error_errno</a>(<q>"Could not write to %s"</q>, <a class="local col0 ref" href="#20filename" title='filename' data-ref="20filename">filename</a>);</td></tr>
<tr><th id="106">106</th><td>		<b>else</b> <b>if</b> (<a class="ref" href="../../include/stdio.h.html#fclose" title='fclose' data-ref="fclose">fclose</a>(<a class="local col2 ref" href="#22f" title='f' data-ref="22f">f</a>))</td></tr>
<tr><th id="107">107</th><td>			<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> = <a class="macro" href="../git-compat-util.h.html#447" title="(error_errno(&quot;Could not close %s&quot;, filename), const_error())" data-ref="_M/error_errno">error_errno</a>(<q>"Could not close %s"</q>, <a class="local col0 ref" href="#20filename" title='filename' data-ref="20filename">filename</a>);</td></tr>
<tr><th id="108">108</th><td>		<a class="ref" href="../../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col1 ref" href="#11result" title='result' data-ref="11result">result</a>.<a class="ref" href="../xdiff/xdiff.h.html#s_mmbuffer::ptr" title='s_mmbuffer::ptr' data-ref="s_mmbuffer::ptr">ptr</a>);</td></tr>
<tr><th id="109">109</th><td>		<a class="ref" href="../../include/stdlib.h.html#free" title='free' data-ref="free">free</a>(<a class="local col1 ref" href="#21fpath" title='fpath' data-ref="21fpath">fpath</a>);</td></tr>
<tr><th id="110">110</th><td>	}</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td>	<b>if</b> (<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> &gt; <var>127</var>)</td></tr>
<tr><th id="113">113</th><td>		<a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a> = <var>127</var>;</td></tr>
<tr><th id="114">114</th><td></td></tr>
<tr><th id="115">115</th><td>	<b>return</b> <a class="local col3 ref" href="#13ret" title='ret' data-ref="13ret">ret</a>;</td></tr>
<tr><th id="116">116</th><td>}</td></tr>
<tr><th id="117">117</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2017-Aug-29</em> from project codebrowser revision <em>v2.14.1-326-g3dc57eb</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
